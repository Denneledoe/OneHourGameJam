<script type='text/javascript'>
	function VoteTheme(themeID, vote, btn_id){
		$.get("api/themevote?themeID="+themeID+"&vote="+vote, function(data){
			var d = jQuery.parseJSON(data)

			$("#"+btn_id+"-1").removeClass("btn-danger");
			$("#"+btn_id+"-2").removeClass("btn-warning");
			$("#"+btn_id+"-3").removeClass("btn-success");
			if(vote == 1){
				$("#"+btn_id+"-"+vote).addClass("btn-danger");
			}
			if(vote == 2){
				$("#"+btn_id+"-"+vote).addClass("btn-warning");
			}
			if(vote == 3){
				$("#"+btn_id+"-"+vote).addClass("btn-success");
			}
		});
	}
</script>

<h3>Jam theme suggestions</h3>
<h4>Suggest a theme</h4>
<form method='post'>
	<div class="form-group">
		<label for="theme">Theme</label>
		<input type="text" class="form-control" id="theme" name='theme' placeholder="Theme" value="" required>
		<button type="submit" name='action' value='savenewtheme' class="btn btn-default">Save Theme</button>
	</div>
</form>

<h4>Theme Voting</h4>

<p>
	Here you can vote on the themes you would like to appear in jams. You can suggest up to {{CONFIG.PRETTY_PRINT.THEMES_PER_USER}} themes.
</p>

<p>
	Themes suggested above will appear in this list. Once a theme receives enough votes, it becomes considered for a jam, depending on its popularity. Themes which don't perform as well as others regularly get removed, the threshold for removal however depends on the popularity of the other suggested themes. Old themes are also removed to make way for new ones, irrespective of their popularity as the votes for them likely no longer represent the opinion of currently active participants. Any theme that gets removed due to unpopularity or age can be suggested again at any point.
</p>

{{#cookies.is_streamer}}
<p class='bold'>
	Please disable streamer mode to vote on themes.
</p>
{{/cookies.is_streamer}}

{{#user.admin}}
<p><strong>Admin Note: Deletion and banning of themes has moved to <a href='?page=managethemes'>Manage Themes</a></strong></p>
{{/user.admin}}

<h4>Your themes</h4>

{{#themes.has_own_themes}}
    <ul>
        <table>
            <tr>
                <th colspan='3' class='themeTableCell themeTableCellCentered'>
                    Vote
                </th>
                <th class='themeTableCell themeTableCellCentered'>
                    Theme
                </th>
                {{#CONFIG.PRETTY_PRINT.DISPLAY_THEME_PROBABILITY}}
                <th class='themeTableCell themeTableCellCentered'>
                    Probability of Selection
                </th>
                {{/CONFIG.PRETTY_PRINT.DISPLAY_THEME_PROBABILITY}}
            </tr>
            {{#themes.own_themes}}
            {{#theme_visible}}
            <tr>
                <td class='themeTableCell'>
                    {{#cookies.is_streamer}}
                    <div class="btn btn-default" disabled>+1</div>
                    {{/cookies.is_streamer}}
                    {{^cookies.is_streamer}}
                    <button id="{{{theme_button_id}}}-3" type="button" name='action' value='bantheme'
                        class="btn btn-default {{#user_vote_for}}btn-success{{/user_vote_for}}"
                        onclick='VoteTheme("{{{theme_id}}}", 3, "{{{theme_button_id}}}");'>+1</button>
                    {{/cookies.is_streamer}}
                </td>
                <td class='themeTableCell'>
                    {{#cookies.is_streamer}}
                    <div class="btn btn-default" disabled>0</div>
                    {{/cookies.is_streamer}}
                    {{^cookies.is_streamer}}
                    <button id="{{{theme_button_id}}}-2" type="button" name='action' value='bantheme'
                        class="btn btn-default {{#user_vote_neutral}}btn-warning{{/user_vote_neutral}}"
                        onclick='VoteTheme("{{{theme_id}}}", 2, "{{{theme_button_id}}}");'>0</button>
                    {{/cookies.is_streamer}}
                </td>
                <td class='themeTableCell'>
                    {{#cookies.is_streamer}}
                    <div class="btn btn-default" disabled>-1</div>
                    {{/cookies.is_streamer}}
                    {{^cookies.is_streamer}}
                    <button id="{{{theme_button_id}}}-1" type="button" name='action' value='bantheme'
                        class="btn btn-default {{#user_vote_against}}btn-danger{{/user_vote_against}}"
                        onclick='VoteTheme("{{{theme_id}}}", 1, "{{{theme_button_id}}}");'>-1</button>
                    {{/cookies.is_streamer}}
                </td>
                <td class='themeTableCell'>
                    {{{theme}}}
                </td>
                {{#CONFIG.PRETTY_PRINT.DISPLAY_THEME_PROBABILITY}}
                <td class='themeTableCell themeTableCellCentered'>
                    {{{ThemeSelectionProbabilityByVoteDifferenceText}}}
                </td>
                {{/CONFIG.PRETTY_PRINT.DISPLAY_THEME_PROBABILITY}}
                <td class='themeTableCell'>
                    <form method='POST' style='display: inline-block;'>
                        <button type="submit" name='action' value='deletetheme' class="btn btn-default">X</button>
                        <input type='hidden' name='theme' value='{{{theme}}}'>
                        <input type='hidden' name='pageid' value='themes'>
                    </form>
                </td>
            </tr>
            {{/theme_visible}}
            {{/themes.own_themes}}
        </table>
    </ul>
{{/themes.has_own_themes}}
{{^themes.has_own_themes}}
    <p>You haven't suggested any themes!</p>
{{/themes.has_own_themes}}

<h4>Other Themes</h4>

{{#themes.has_other_themes}}
    <ul>
        <table>
            <tr>
                <th colspan='3' class='themeTableCell themeTableCellCentered'>
                    Vote
                </th>
                <th class='themeTableCell themeTableCellCentered'>
                    Theme
                </th>
            </tr>
            {{#themes.other_themes}}
            {{#theme_visible}}
            <tr>
                <td class='themeTableCell'>
                    {{#cookies.is_streamer}}
                    <div class="btn btn-default" disabled>+1</div>
                    {{/cookies.is_streamer}}
                    {{^cookies.is_streamer}}
                    <button id="{{{theme_button_id}}}-3" type="button" name='action' value='bantheme'
                        class="btn btn-default {{#user_vote_for}}btn-success{{/user_vote_for}}"
                        onclick='VoteTheme("{{{theme_id}}}", 3, "{{{theme_button_id}}}");'>+1</button>
                    {{/cookies.is_streamer}}
                </td>
                <td class='themeTableCell'>
                    {{#cookies.is_streamer}}
                    <div class="btn btn-default" disabled>0</div>
                    {{/cookies.is_streamer}}
                    {{^cookies.is_streamer}}
                    <button id="{{{theme_button_id}}}-2" type="button" name='action' value='bantheme'
                        class="btn btn-default {{#user_vote_neutral}}btn-warning{{/user_vote_neutral}}"
                        onclick='VoteTheme("{{{theme_id}}}", 2, "{{{theme_button_id}}}");'>0</button>
                    {{/cookies.is_streamer}}
                </td>
                <td class='themeTableCell'>
                    {{#cookies.is_streamer}}
                    <div class="btn btn-default" disabled>-1</div>
                    {{/cookies.is_streamer}}
                    {{^cookies.is_streamer}}
                    <button id="{{{theme_button_id}}}-1" type="button" name='action' value='bantheme'
                        class="btn btn-default {{#user_vote_against}}btn-danger{{/user_vote_against}}"
                        onclick='VoteTheme("{{{theme_id}}}", 1, "{{{theme_button_id}}}");'>-1</button>
                    {{/cookies.is_streamer}}
                </td>
                <td class='themeTableCell'>
                    {{{theme}}}
                </td>
            </tr>
            {{/theme_visible}}
            {{/themes.other_themes}}
        </table>
    </ul>
{{/themes.has_other_themes}}
{{^themes.has_other_themes}}
    <b>Nobody has suggested other themes.</b>
{{/themes.has_other_themes}}


